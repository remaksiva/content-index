<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Remaksiva: Find Your Clip</title>
    
    <link rel="icon" type="image/png" href="favicon.png"> 
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;800&display=swap" rel="stylesheet">
    
    <link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.3/dist/darkly/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPH544uWIX+LLMD/CDyD1vJcK/kM5Q3gBfH7v9tV+C2mE6z6F3tC8JmS8F6B2vL2C1W/Q6H5zQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    
    <style>
        /* –ë–ê–ó–û–í–Ü –°–¢–ò–õ–Ü (–î–ï–°–ö–¢–û–ü) */
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #222; }
        .container { margin: 100px auto 20px auto; max-width: 90%; padding: 20px; border-radius: 8px; box-shadow: 0 0 20px (204, 0, 105, 0.3); }
        h1 { font-family: 'Montserrat', sans-serif; font-weight: 800; font-size: 2.8em; color: #ffffff; margin-bottom: 20px; text-align: center; text-shadow: 2px 2px 6px rgba(204, 0, 105, 0.7); letter-spacing: 2px; padding-top: 10px; }
        #subheading-thanks, #subheading-value { font-family: 'Montserrat', sans-serif; font-size: 1.1em; font-weight: 600; color: #ccc; text-align: center; }
        #subheading-thanks { margin-top: -15px; margin-bottom: 5px; }
        #subheading-value { margin-bottom: 20px; padding-bottom: 5px; border-bottom: 1px solid rgba(204, 0, 105, 0.4); width: 80%; max-width: 800px; margin-left: auto; margin-right: auto; }
        #subheading-ua-thanks, #subheading-ua-value { font-family: 'Montserrat', sans-serif; font-size: 0.85em; font-style: italic; font-weight: 500; color: #999; text-align: center; line-height: 1.2; margin-top: 0px; margin-bottom: 3px; }
        #subheading-ua-value { margin-bottom: 30px; }
        #logo-image { display: block; margin: 0 auto 15px auto; max-width: 150px; height: auto; border-radius: 50%; border: 3px solid #375a7f; transition: opacity 0.2s; cursor: pointer; }
        #logo-image:hover { opacity: 0.8; }
        #channelButtonContainer { text-align: center; margin-bottom: 20px; }

        /* –°–¢–ò–õ–Ü –¢–ê–ë–õ–ò–¶–Ü (–î–ï–°–ö–¢–û–ü) */
        .styled-table {
            width: 100%;
            border-collapse: separate; 
            border-spacing: 0;
            margin-top: 20px;
            overflow: hidden; 
            border-radius: 8px; 
        }
        .styled-table thead th { 
            background-color: #33001a !important; 
            color: white; 
            text-align: center !important; 
            padding: 12px 10px;
            border: none;
            font-size: 1.0em;
        }
        .styled-table tbody td {
            border: 1px solid #333; 
            vertical-align: middle !important; 
            text-align: center !important; 
            padding: 10px;
            font-size: 0.95em;
        }
        .styled-table tbody tr {
            background-color: #2a2a2a; 
        }
        .styled-table tbody tr:nth-child(even) {
            background-color: #333; 
        }
        
        /* –ö–ù–û–ü–ö–ò –¢–ê –ü–û–°–ò–õ–ê–ù–ù–Ø (–î–ï–°–ö–¢–û–ü) */
        .styled-table tbody td a.btn-youtube {
            color: white !important;
            background-color: #cc0069 !important; 
            border-color: #cc0069 !important;
            padding: 5px 10px;
            display: inline-block;
            font-size: 0.9em;
        }
        .styled-table tbody td a.btn-youtube:hover {
            background-color: #cc0000 !important; 
            border-color: #cc0000 !important;
        }
        
        /* üí° –û–ù–û–í–õ–ï–ù–Ü –°–¢–ò–õ–Ü –ö–ù–û–ü–ö–ò PEXELS (–¢–ï–ö–°–¢) - –î–ï–°–ö–¢–û–ü */
        .styled-table tbody td a.btn-pexels {
            color: white !important; 
            background-color: transparent !important; 
            border: 2px solid #08a080 !important; /* –ó–µ–ª–µ–Ω–∞ –æ–±–≤–æ–¥–∫–∞ */
            border-radius: 6px !important;            
            padding: 5px 10px; 
            margin: 2px;
            display: inline-block; 
            font-size: 0.9em; 
            font-style: italic; /* –ö—É—Ä—Å–∏–≤ */
            white-space: nowrap; 
            transition: background-color 0.2s ease-in-out; 
        }
        
        .styled-table tbody td a.btn-pexels:hover {
            background-color: rgba(8, 160, 128, 0.2) !important; 
            border-color: #08a080 !important; 
        }

        /* –ö–û–ù–¢–ï–ô–ù–ï–† –î–ñ–ï–†–ï–õ (–î–ï–ö–°–¢–û–ü: –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ) */
        .pexels-links-container {
            max-width: 550px; 
            display: flex;
            flex-wrap: wrap; 
            justify-content: center; 
            margin: 0 auto;
        }

        /* –§–Ü–õ–¨–¢–† (–î–ï–°–ö–¢–û–ü) */
        #filterContainer { margin-bottom: 25px; display: flex; justify-content: center; align-items: center; text-align: center; }
        #filterContainer select {
            -webkit-appearance: none; -moz-appearance: none; appearance: none;
            background-image: none !important; padding-left: 15px !important;
            padding-right: 15px !important; text-align-last: center; text-align: center;
            font-size: 1.1em; padding-top: 8px; padding-bottom: 8px; border-radius: 6px;
            margin: 5px 0; width: 350px; max-width: 90%; height: auto; box-sizing: border-box;
        }
        
        .footer-thanks { margin-top: 40px; padding: 20px 0; color: #ccc; font-size: 0.9em; border-top: 1px solid #333; }
        
        /* üí• –°–¢–ò–õ–Ü –î–õ–Ø –ú–û–ë–Ü–õ–¨–ù–û–á –í–ï–†–°–Ü–á (–§–Ü–ù–ê–õ–¨–ù–ï –†–ï–ì–£–õ–Æ–í–ê–ù–ù–Ø) */
        @media (max-width: 992px) {
            .container { max-width: 95%; padding: 10px; margin-top: 20px; }
            
            /* 1. –ó–ë–Ü–õ–¨–®–ï–ù–ù–Ø –û–°–ù–û–í–ù–û–ì–û –ó–ê–ì–û–õ–û–í–ö–ê */
            h1 { font-size: 3.5em; } 
            
            /* 2. –ó–ë–Ü–õ–¨–®–ï–ù–ù–Ø –ü–Ü–î–ó–ê–ì–û–õ–û–í–ö–Ü–í */
            #subheading-thanks, #subheading-value { font-size: 1.8em; } 
            #subheading-ua-thanks, #subheading-ua-value { font-size: 1.5em; } 

            /* 3. –§–Ü–õ–¨–¢–† "PUSH ME" - –ë–ï–ó –ó–ú–Ü–ù */
            #filterContainer select { 
                font-size: 2.5em !important; 
                padding: 20px !important; 
                max-width: 95% !important; 
                width: 100% !important; 
            }

            /* –ó–ë–Ü–õ–¨–®–ï–ù–ù–Ø –¢–ï–ö–°–¢–£ –í –¢–ê–ë–õ–ò–¶–Ü –¢–ê –ó–ê–ì–û–õ–û–í–ö–Ü–í –¢–ê–ë–õ–ò–¶–Ü (–ë–µ–∑ –∑–º—ñ–Ω) */
            .styled-table thead th { 
                font-size: 2.0em !important; 
                padding: 15px 5px; 
            }
            .styled-table tbody td { 
                font-size: 1.8em !important; 
                padding: 12px 5px;
            }

            /* 4. –ó–ú–ï–ù–®–ï–ù–ù–Ø –ö–ù–û–ü–ö–ò YOUTUBE */
            .styled-table tbody td a.btn-youtube { 
                font-size: 1.2em !important; 
                padding: 0.6rem 1.1rem !important; 
                line-height: 1.3; 
            }
            
            /* 5. –ù–û–í–ê –ö–ù–û–ü–ö–ê PEXELS (–†–û–ó–ú–Ü–† –Ø–ö –£ YOUTUBE, –¢–ï–ö–°–¢) */
            .styled-table tbody td a.btn-pexels { 
                font-size: 1.2em !important; /* –†–æ–∑–º—ñ—Ä —è–∫ —É YouTube */
                padding: 0.6rem 1.1rem !important; 
                margin: 6px; 
                display: block; 
                width: 80%; 
                max-width: 150px; 
            }

            /* –ù–û–í–ê –õ–û–ì–Ü–ö–ê –î–õ–Ø SOURCE (–í–ï–†–¢–ò–ö–ê–õ–¨–ù–û) */
            .pexels-links-container {
                display: flex;
                flex-direction: column; 
                align-items: center; 
                max-width: 100%;
                margin: 0;
            }
            
            .footer-thanks { font-size: 1.2em; }
        }
    </style>
</head>
<body>
    <div class="container">
        
        <div id="channelButtonContainer">
             <a href="https://www.youtube.com/@remaksiva" target="_blank">
                <img id="logo-image" src="channels4_profile.jpg" alt="Channel Logo">
             </a>
        </div>
        
        <h1>Remaksiva: Find Your Clip</h1>
        
        <p id="subheading-thanks">
            With respect to the community, the REMAKSIVA project thanks the authors <br>
            for their video and photo materials.
        </p>

        <p id="subheading-value">
            Use this interactive index to check if Your works are featured here.
        </p>
        
        <p id="subheading-ua-thanks">
            –ó –ø–æ–≤–∞–≥–æ—é –¥–æ —Å–ø—ñ–ª—å–Ω–æ—Ç–∏, –ø—Ä–æ–µ–∫—Ç REMAKSIVA –¥—è–∫—É—î –∞–≤—Ç–æ—Ä–∞–º –∑–∞ —ó—Ö–Ω—ñ –≤—ñ–¥–µ–æ- —Ç–∞ —Ñ–æ—Ç–æ–º–∞—Ç–µ—Ä—ñ–∞–ª–∏.
        </p>

        <p id="subheading-ua-value">
            –°–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ—Å—è —Ü–∏–º —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–º —ñ–Ω–¥–µ–∫—Å–æ–º, —â–æ–± –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ —î —Ç—É—Ç –í–∞—à—ñ —Ä–æ–±–æ—Ç–∏.
        </p>
        
        <div id="filterContainer"></div>

        <table id="acknowledgements-table" class="styled-table">
            <tbody>
                <tr>
                    <td colspan="4" style="text-align: center;">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö...</td>
                </tr>
            </tbody>
        </table>

    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        const CSV_FILE_PATH = 'pexels_master_acknowledgements.csv'; 
        const TABLE_ID = 'acknowledgements-table';
        const FILTER_CONTAINER_ID = 'filterContainer';
        let fullValidData = []; 

        // ----------------------------------------------------
        // 1. –§–£–ù–ö–¶–Ü–Ø –ì–†–£–ü–£–í–ê–ù–ù–Ø –î–ê–ù–ò–• (–ê–ì–†–ï–ì–ê–¶–Ü–Ø)
        // ----------------------------------------------------
        function groupDataByClip(data, isFiltered = false) {
            const groupedByClip = {};
            
            data.forEach(row => {
                // –ö—Ä–∏—Ç–µ—Ä—ñ–π –¥–ª—è –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è - –ª–∏—à–µ Clip_Final_Name —Ç–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å YouTube_ID
                if (!row.Clip_Final_Name) return; 

                const clipName = row.Clip_Final_Name;
                const author = row.Pexels_Author;
                const pexelsUrl = row.Pexels_URL; // –û—Ç—Ä–∏–º—É—î–º–æ Pexels URL

                if (!groupedByClip[clipName]) {
                    groupedByClip[clipName] = {
                        Name: clipName,
                        Date: row.Clip_Publication_Date,
                        ClipURL: row.Clip_Public_URL,
                        Authors: {} 
                    };
                }

                
                if (author && author.toString().trim() !== '') {
                    // 1. –ì–ê–†–ê–ù–¢–£–Ñ–ú–û, –©–û –ó–ê–ü–ò–° –ü–†–û –ê–í–¢–û–†–ê –Ü–°–ù–£–Ñ (–Ω–∞–≤—ñ—Ç—å —è–∫—â–æ MediaItems –±—É–¥–µ –ø–æ—Ä–æ–∂–Ω—ñ–º)
                    if (!groupedByClip[clipName].Authors[author]) {
                        groupedByClip[clipName].Authors[author] = {
                            PexelsAuthor: author,
                            MediaItems: [] // –°—é–¥–∏ –∑–±–∏—Ä–∞—î–º–æ –≤—Å—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è Pexels —Ü—å–æ–≥–æ –∞–≤—Ç–æ—Ä–∞ –î–õ–Ø –¶–¨–û–ì–û –ö–õ–Ü–ü–£
                        };
                    }
                    
                    // 2. –î–û–î–ê–Ñ–ú–û –ï–õ–ï–ú–ï–ù–¢ –î–û MEDIAITEMS –¢–Ü–õ–¨–ö–ò, –Ø–ö–©–û –ü–û–°–ò–õ–ê–ù–ù–Ø –í–ê–õ–Ü–î–ù–ï
                    if (pexelsUrl && pexelsUrl.toString().trim() !== '') {
                         // –ö–û–ñ–ï–ù –†–Ø–î–û–ö CSV = –û–î–ù–ï –ü–û–°–ò–õ–ê–ù–ù–Ø PEXELS
                        groupedByClip[clipName].Authors[author].MediaItems.push({
                            PexelsURL: pexelsUrl,
                            PexelsID: row.Pexels_ID
                        });
                    }
                }
            });

            const result = Object.values(groupedByClip).map(clip => ({
                ...clip,
                Authors: Object.values(clip.Authors)
            }));

            // –°–û–†–¢–£–í–ê–ù–ù–Ø –ö–õ–Ü–ü–Ü–í –ó–ê –î–ê–¢–û–Æ (–í–Ü–î –ù–ê–ô–ù–û–í–Ü–®–û–ì–û –î–û –ù–ê–ô–°–¢–ê–†–Ü–®–û–ì–û)
            result.sort((a, b) => {
                // –†–æ–∑–¥—ñ–ª—è—î–º–æ –¥–∞—Ç—É (–î–î.–ú–ú.–†–†–†–†), –ø–µ—Ä–µ–≤–µ—Ä—Ç–∞—î–º–æ (–†–†–†–†.–ú–ú.–î–î), –æ–±'—î–¥–Ω—É—î–º–æ (–†–†–†–†–ú–ú–î–î) –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è
                const dateA = a.Date.split('.').reverse().join(''); 
                const dateB = b.Date.split('.').reverse().join(''); 
                
                if (dateA > dateB) return -1;  
                if (dateA < dateB) return 1;    
                return 0;
            });


            // –õ–û–ì–Ü–ö–ê –î–õ–Ø –†–ï–ñ–ò–ú–£ "–í–°–Ü –ê–í–¢–û–†–ò":
            if (!isFiltered) {
                return result.map(clip => {
                    // –Ø–∫—â–æ –Ω–µ–º–∞—î –∞–≤—Ç–æ—Ä—ñ–≤, –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ "(–í–ª–∞—Å–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç)"
                    if (clip.Authors.length === 0) {
                        return {
                            ...clip,
                            Authors: [{ PexelsAuthor: '(–í–ª–∞—Å–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç)', MediaItems: [] }]
                        };
                    }

                    const authorNames = clip.Authors.map(a => a.PexelsAuthor);
                    
                    // –°–û–†–¢–£–í–ê–ù–ù–Ø –ê–í–¢–û–†–Ü–í –ó–ê –ê–õ–§–ê–í–Ü–¢–û–ú
                    authorNames.sort((a, b) => a.toLowerCase().localeCompare(b.toLowerCase(), 'uk', { sensitivity: 'base' })); 
                    
                    const allAuthorsList = authorNames.join('<br>');
                    
                    return {
                        ...clip,
                        // –£ —Ä–µ–∂–∏–º—ñ "–≤—Å—ñ –∞–≤—Ç–æ—Ä–∏" –º–∏ –æ–±'—î–¥–Ω—É—î–º–æ –≤—Å—ñ—Ö –∞–≤—Ç–æ—Ä—ñ–≤ –≤ –æ–¥–∏–Ω —Ä—è–¥–æ–∫
                        Authors: [{ PexelsAuthor: allAuthorsList, MediaItems: [] }]
                    };
                });
            }

            // –£ —Ä–µ–∂–∏–º—ñ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ —è–∫ —î
            return result;
        }

        // ----------------------------------------------------
        // 2. –§–£–ù–ö–¶–Ü–Ø –†–ï–ù–î–ï–†–ò–ù–ì–£ –¢–ê–ë–õ–ò–¶–Ü (–í–ö–õ. –ü–ï–†–ï–í–Ü–†–ö–£ –ü–û–°–ò–õ–ê–ù–¨)
        // ----------------------------------------------------
        function renderTable(groupedData, isFiltered = false) {
            const table = document.getElementById(TABLE_ID);
            if (!table) return;

            const isMobile = window.matchMedia('(max-width: 992px)').matches;

            let lastHeader = isFiltered ? 'source' : 'authors'; 
            let thead = '<thead><tr>';
            
            let headers = ['clip name', 'date', 'YouTube', lastHeader];

            if (isMobile) {
                headers = ['clip name', 'YouTube', lastHeader];
            }
            
            headers.forEach(h => {
                thead += `<th>${h}</th>`;
            });
            thead += '</tr></thead>';
            
            let tbody = '<tbody>';
            
            const visibleGroups = groupedData; 
                
            if (visibleGroups.length === 0) {
                 tbody += '<tr><td colspan="' + headers.length + '">No records found.</td></tr>';
            } else {
                visibleGroups.forEach(clipGroup => {
                    // –£ —Ä–µ–∂–∏–º—ñ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó, AuthorsToRender –º—ñ—Å—Ç–∏—Ç—å –ª–∏—à–µ –æ–¥–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ - –¥–∞–Ω—ñ –≤–∏–±—Ä–∞–Ω–æ–≥–æ –∞–≤—Ç–æ—Ä–∞ –¥–ª—è —Ü—å–æ–≥–æ –∫–ª—ñ–ø—É.
                    const authorsToRender = clipGroup.Authors; 

                    authorsToRender.forEach((authorData, index) => {
                        
                        let finalContent = '';
                        
                        if (isFiltered) {
                            // üëá –¶–ï–ô –ë–õ–û–ö –í–ò–ö–û–ù–£–Ñ –í–ê–®–£ –õ–û–ì–Ü–ö–£:
                            // 1. –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —î –í–ê–õ–Ü–î–ù–Ü –ø–æ—Å–∏–ª–∞–Ω–Ω—è Pexels (MediaItems) —É —Ü—å–æ–≥–æ –∞–≤—Ç–æ—Ä–∞ –î–õ–Ø –¶–¨–û–ì–û –ö–õ–Ü–ü–£
                            if (authorData.MediaItems && authorData.MediaItems.length > 0) {
                                let pexelsCellContent = '';
                                // 2. –°—Ç–≤–æ—Ä—é—î–º–æ –û–ö–†–ï–ú–£ –∫–Ω–æ–ø–∫—É –¥–ª—è –ö–û–ñ–ù–û–ì–û –ø–æ—Å–∏–ª–∞–Ω–Ω—è —É –º–∞—Å–∏–≤—ñ MediaItems
                                authorData.MediaItems.forEach(media => {
                                    // –¢–ï–ö–°–¢–û–í–ê –ö–ù–û–ü–ö–ê Pexels
                                    pexelsCellContent += `<a href="${media.PexelsURL}" target="_blank" class="btn btn-pexels btn-sm">
                                        pexels
                                    </a>`;
                                });
                                finalContent = `<div class="pexels-links-container">${pexelsCellContent}</div>`;
                            } else {
                                // 3. –Ø–∫—â–æ –ø–æ—Å–∏–ª–∞–Ω—å –Ω–µ–º–∞—î (length === 0), –∑–∞–ª–∏—à–∞—î–º–æ finalContent –ø–æ—Ä–æ–∂–Ω—ñ–º.
                                finalContent = ''; 
                            }
                        } else {
                            // –†–µ–∂–∏–º –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º (—Å–ø–∏—Å–æ–∫ —É—Å—ñ—Ö –∞–≤—Ç–æ—Ä—ñ–≤)
                            finalContent = `<div>${authorData.PexelsAuthor}</div>`;
                        }

                        // –í—Ä–∞—Ö–æ–≤—É—î–º–æ, —â–æ –≤ —Ä–µ–∂–∏–º—ñ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –±—É–¥–µ –ª–∏—à–µ 1 —Ä—è–¥–æ–∫ –Ω–∞ –∫–ª—ñ–ø
                        const totalRows = authorsToRender.length; 
                        const clipLinkHTML = `<a href="${clipGroup.ClipURL}" target="_blank" class="btn btn-youtube btn-sm"><i class="fab fa-youtube"></i> YouTube</a>`;
                        
                        tbody += `<tr class="clip-row">`;

                        if (index === 0) { 
                            tbody += `<td rowspan="${totalRows}">${clipGroup.Name}</td>`;
                            
                            if (!isMobile) {
                                // üí° –ó–ú–Ü–ù–ê –¢–£–¢: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç–∏ –î–î.–ú–ú.–†–†–†–† (–∑ –∫—Ä–∞–ø–∫–∞–º–∏)
                                const formattedDate = clipGroup.Date;
                                tbody += `<td rowspan="${totalRows}">${formattedDate}</td>`;
                            }
                            
                            tbody += `<td rowspan="${totalRows}">${clipLinkHTML}</td>`;
                        }

                        tbody += `<td>${finalContent}</td>`;
                        
                        tbody += '</tr>';
                    });
                });
            }
            
            tbody += '</tbody>';
            
            table.innerHTML = thead + tbody;
        }


        // ----------------------------------------------------
        // 3. –§–£–ù–ö–¶–Ü–Ø –§–Ü–õ–¨–¢–†–ê–¶–Ü–á 
        // ----------------------------------------------------
        function setupAuthorFilter(data) { 
            const container = $('#' + FILTER_CONTAINER_ID);
            
            const allAuthors = data.map(item => item.Pexels_Author);
            const uniqueAuthors = [...new Set(allAuthors)]
                .filter(a => a && a.toString().trim() !== '')
                .map(a => a.toString().trim())
                .sort((a, b) => a.toLowerCase().localeCompare(b.toLowerCase(), 'uk', { sensitivity: 'base' })); 

            const select = $('<select id="authorFilterSelect" class="form-select"><option value="">\u25bc&nbsp;&nbsp;&nbsp;&nbsp;push me&nbsp;&nbsp;&nbsp;&nbsp;\u25b2</option></select>')
                .appendTo(container);
            
            uniqueAuthors.forEach(function(author) {
                const display = author.length > 50 ? author.substring(0, 50) + '...' : author;
                select.append('<option value="' + author + '">' + display + '</option>');
            });

            select.on('change', function() {
                const selectedAuthor = $(this).val();
                
                let filteredData = fullValidData;
                let isFiltered = false; 

                if (selectedAuthor) {
                    // –§—ñ–ª—å—Ç—Ä—É—î–º–æ –ø–æ—á–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ –∑–∞ –≤–∏–±—Ä–∞–Ω–∏–º –∞–≤—Ç–æ—Ä–æ–º
                    filteredData = fullValidData.filter(row => row.Pexels_Author === selectedAuthor);
                    isFiltered = true;
                }
                
                // –ì—Ä—É–ø—É—î–º–æ –í–ñ–ï –í–Ü–î–§–Ü–õ–¨–¢–†–û–í–ê–ù–Ü –¥–∞–Ω—ñ
                const grouped = groupDataByClip(filteredData, isFiltered); 
                renderTable(grouped, isFiltered); 
            });
        }


        // ----------------------------------------------------
        // 4. –û–°–ù–û–í–ù–ò–ô –ë–õ–û–ö –í–ò–ö–û–ù–ê–ù–ù–Ø 
        // ----------------------------------------------------
        $(document).ready(function() {
            Papa.parse(CSV_FILE_PATH, {
                download: true,
                header: true,
                skipEmptyLines: true,
                delimiter: ';', 
                complete: function(results) {
                    if (results.data.length === 0) {
                        $('#' + TABLE_ID).html('<tbody><tr><td colspan="4" class="alert alert-warning text-center mt-4">CSV file loaded, but contains no data.</td></tr></tbody>');
                        return;
                    }
                    
                    // –û—Å–Ω–æ–≤–Ω–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è: –≤–∏–≤–æ–¥–∏–º–æ –ª–∏—à–µ –∫–ª—ñ–ø–∏ –∑ YouTube ID
                    fullValidData = results.data.filter(row => row.YouTube_ID);
                    
                    if (fullValidData.length === 0) {
                        $('#' + TABLE_ID).html('<tbody><tr><td colspan="4">No confirmed media (with YouTube ID) found for display.</td></tr></tbody>');
                        return;
                    }
                    
                    const initialGrouped = groupDataByClip(fullValidData, false); 
                    renderTable(initialGrouped, false);
                    
                    setupAuthorFilter(fullValidData);
                    
                    let lastIsMobile = window.matchMedia('(max-width: 992px)').matches;
                    $(window).on('resize', function() {
                        const currentIsMobile = window.matchMedia('(max-width: 992px)').matches;
                        if (currentIsMobile !== lastIsMobile) {
                            const selectValue = $('#authorFilterSelect').val();
                            const isFiltered = !!selectValue;
                            const filteredData = selectValue ? fullValidData.filter(row => row.Pexels_Author === selectValue) : fullValidData;
                            const grouped = groupDataByClip(filteredData, isFiltered); 
                            renderTable(grouped, isFiltered);
                            lastIsMobile = currentIsMobile;
                        }
                    });
                },
                error: function(error) {
                    let errorMessage = "Critical error loading data or processing CSV. Check: 1) CSV file name. 2) Python server status. Details: " + error.message;
                    $('#' + TABLE_ID).html('<tbody><tr><td colspan="4" class="alert alert-danger text-center mt-4">' + errorMessage + '</td></tr></tbody>');
                    console.error("PapaParse Error:", error);
                }
            });
        });
    </script>
    
    <footer class="text-center footer-thanks">
        <p>
            The <a href="https://www.youtube.com/@remaksiva" target="_blank" class="text-info">Remaksiva</a> Project sincerely thanks:
            <br>
            The 
            <a href="https://www.pexels.com/" target="_blank" class="text-info">Pexels</a> 
            community and all authors for the provided photo and video materials. 
            <br>
            As well as the 
            <a href="https://www.youtube.com/" target="_blank" class="text-info">YouTube</a> 
            platform for the opportunity to share video content.
        </p>
    </footer>
</body>
</html>
